***SET WORKING DIRECTORY
cd "/Users/ts/OneDrive/Uni/UM OD/Year 1/Macro/stata/"

include "/Users/ts/OneDrive/Uni/UM OD/Year 1/Macro/stata/do/paths.do"

use "${apidata}/WBAPI_merged_raw.dta", clear
des
*BEGIN DATA CLEANING

**ORDER VARS LIKE PREVIOUS ANALYSIS STRUCTURE (PER COUNTRY,EXCEL DATA)
order bg_gsr_nfsv_gd_zs - per_si_allsi_cov_q5_tot
ren year Year
ren countrycode CC
order CC Year, first

****BATCH COPY WB API INDICATOR LABEL TO VARIABLE NOTES (SPLIT IN 2 JOBS TO AVOID TOO MANY VARS ERROR)
foreach oldvar in bg_gsr_nfsv_gd_zs bm_gsr_cmcp_zs bm_gsr_fcty_cd bm_gsr_gnfs_cd bm_gsr_insf_zs bm_gsr_mrch_cd bm_gsr_nfsv_cd bm_gsr_royl_cd bm_gsr_totl_cd bm_gsr_tran_zs bm_gsr_trvl_zs bm_klt_dinv_cd_wd bm_klt_dinv_wd_gd_zs bm_trf_prvt_cd bm_trf_pwkr_cd_dt bn_cab_xoka_cd bn_cab_xoka_gd_zs bn_fin_totl_cd bn_gsr_fcty_cd bn_gsr_gnfs_cd bn_gsr_mrch_cd bn_kac_eoms_cd bn_klt_dinv_cd bn_klt_ptxl_cd bn_res_incl_cd bn_trf_curr_cd bn_trf_kogt_cd bx_grt_exta_cd_wd bx_grt_tech_cd_wd bx_gsr_ccis_cd bx_gsr_ccis_zs bx_gsr_cmcp_zs bx_gsr_fcty_cd bx_gsr_gnfs_cd bx_gsr_insf_zs bx_gsr_mrch_cd bx_gsr_nfsv_cd bx_gsr_royl_cd bx_gsr_totl_cd bx_gsr_tran_zs bx_gsr_trvl_zs bx_klt_dinv_cd_wd bx_klt_dinv_wd_gd_zs bx_pef_totl_cd_wd bx_trf_curr_cd bx_trf_pwkr_cd bx_trf_pwkr_cd_dt bx_trf_pwkr_dt_gd_zs dt_dod_dect_cd dt_dod_dect_gn_zs dt_dod_dstc_ir_zs dt_dod_dstc_xp_zs dt_dod_pvlx_cd dt_dod_pvlx_ex_zs dt_dod_pvlx_gn_zs dt_oda_odat_cd dt_oda_odat_gn_zs dt_oda_odat_pc_zs dt_tds_dect_ex_zs dt_tds_dect_gn_zs fi_res_totl_cd fi_res_xgld_cd fp_cpi_totl_zg gc_dod_totl_gd_zs gc_rev_xgrt_gd_zs gc_xpn_totl_gd_zs ne_con_govt_cd ne_con_govt_cn ne_con_govt_kd ne_con_govt_kd_zg ne_con_govt_kn ne_con_govt_zs ne_con_prvt_cd ne_con_prvt_cn ne_con_prvt_kd ne_con_prvt_kd_zg ne_con_prvt_kn ne_con_prvt_pc_kd ne_con_prvt_pc_kd_zg ne_con_prvt_pp_cd ne_con_prvt_pp_kd ne_con_prvt_zs ne_con_totl_cd ne_con_totl_cn ne_con_totl_kd ne_con_totl_kd_zg ne_con_totl_kn ne_con_totl_zs ne_dab_defl_zs ne_dab_totl_cd ne_dab_totl_cn ne_dab_totl_kd ne_dab_totl_kn ne_dab_totl_zs ne_exp_gnfs_cd ne_exp_gnfs_cn ne_exp_gnfs_kd ne_exp_gnfs_kd_zg ne_exp_gnfs_kn ne_exp_gnfs_zs ne_gdi_fprv_cn ne_gdi_fprv_zs ne_gdi_ftot_cd ne_gdi_ftot_cn ne_gdi_ftot_kd ne_gdi_ftot_kd_zg ne_gdi_ftot_kn ne_gdi_ftot_zs ne_gdi_stkb_cd ne_gdi_stkb_cn ne_gdi_stkb_kn ne_gdi_totl_cd ne_gdi_totl_cn ne_gdi_totl_kd ne_gdi_totl_kd_zg ne_gdi_totl_kn ne_gdi_totl_zs ne_imp_gnfs_cd ne_imp_gnfs_cn ne_imp_gnfs_kd ne_imp_gnfs_kd_zg ne_imp_gnfs_kn ne_imp_gnfs_zs ne_rsb_gnfs_cd ne_rsb_gnfs_cn ne_rsb_gnfs_kn ne_rsb_gnfs_zs ne_trd_gnfs_zs nv_agr_totl_cd nv_agr_totl_cn nv_agr_totl_kd nv_agr_totl_kd_zg nv_agr_totl_kn nv_agr_totl_zs nv_fsm_totl_cn nv_fsm_totl_kn nv_ind_manf_cd nv_ind_manf_cn nv_ind_manf_kd nv_ind_manf_kd_zg nv_ind_manf_kn nv_ind_manf_zs nv_ind_totl_cd nv_ind_totl_cn nv_ind_totl_kd nv_ind_totl_kd_zg nv_ind_totl_kn nv_ind_totl_zs nv_mnf_chem_zs_un nv_mnf_fbto_zs_un nv_mnf_mtrn_zs_un nv_mnf_othr_zs_un nv_mnf_txtl_zs_un nv_srv_totl_kd nv_srv_totl_kd_zg nv_srv_totl_zs ny_adj_aedu_cd ny_adj_aedu_gn_zs ny_adj_dco2_cd ny_adj_dco2_gn_zs ny_adj_dfor_cd ny_adj_dfor_gn_zs ny_adj_dkap_cd ny_adj_dkap_gn_zs ny_adj_dmin_cd ny_adj_dmin_gn_zs ny_adj_dngy_cd ny_adj_dngy_gn_zs ny_adj_dpem_cd ny_adj_dpem_gn_zs ny_adj_dres_gn_zs ny_adj_ictr_gn_zs ny_adj_nnat_cd ny_adj_nnat_gn_zs ny_adj_nnty_cd ny_adj_nnty_kd ny_adj_nnty_kd_zg ny_adj_nnty_pc_cd ny_adj_nnty_pc_kd ny_adj_nnty_pc_kd_zg ny_adj_svng_cd ny_adj_svng_gn_zs ny_adj_svnx_cd ny_adj_svnx_gn_zs ny_exp_capm_kn ny_gdp_defl_kd_zg ny_gdp_defl_zs ny_gdp_disc_cn ny_gdp_disc_kn ny_gdp_fcst_cd ny_gdp_fcst_cn ny_gdp_fcst_kd ny_gdp_fcst_kn {
	notes `oldvar' : `oldvar'
}

foreach oldvar in ny_gdp_mktp_cd ny_gdp_mktp_cn ny_gdp_mktp_cn_ad ny_gdp_mktp_kd ny_gdp_mktp_kd_zg ny_gdp_mktp_kn ny_gdp_mktp_pp_cd ny_gdp_mktp_pp_kd ny_gdp_pcap_cd ny_gdp_pcap_cn ny_gdp_pcap_kd ny_gdp_pcap_kd_zg ny_gdp_pcap_kn ny_gdp_pcap_pp_cd ny_gdp_pcap_pp_kd ny_gds_totl_cd ny_gds_totl_cn ny_gds_totl_zs ny_gdy_totl_kn ny_gnp_atls_cd ny_gnp_mktp_cd ny_gnp_mktp_cn ny_gnp_mktp_kd ny_gnp_mktp_kd_zg ny_gnp_mktp_kn ny_gnp_mktp_pp_cd ny_gnp_mktp_pp_kd ny_gnp_pcap_cd ny_gnp_pcap_cn ny_gnp_pcap_kd ny_gnp_pcap_kd_zg ny_gnp_pcap_kn ny_gnp_pcap_pp_cd ny_gnp_pcap_pp_kd ny_gns_ictr_cd ny_gns_ictr_cn ny_gns_ictr_gn_zs ny_gns_ictr_zs ny_gsr_nfcy_cd ny_gsr_nfcy_cn ny_gsr_nfcy_kn ny_tax_nind_cd ny_tax_nind_cn ny_tax_nind_kn ny_trf_nctr_cd ny_trf_nctr_cn ny_trf_nctr_kn ny_ttf_gnfs_kn pa_nus_atls pa_nus_ppp pa_nus_pppc_rf pa_nus_prvt_pp cm_mkt_indx_zg cm_mkt_lcap_cd cm_mkt_lcap_gd_zs cm_mkt_ldom_no cm_mkt_trad_cd cm_mkt_trad_gd_zs cm_mkt_trnr dt_nfl_bond_cd fb_ast_nper_zs fb_atm_totl_p5 fb_bnk_capa_zs fb_cbk_brch_p5 fb_cbk_brwr_p3 fb_cbk_dptr_p3 fd_ast_prvt_gd_zs fd_res_liqu_as_zs fi_res_totl_dt_zs fi_res_totl_mo fm_ast_cgov_zg_m3 fm_ast_domo_zg_m3 fm_ast_doms_cn fm_ast_nfrg_cn fm_ast_prvt_zg_m3 fm_lbl_bmny_cn fm_lbl_bmny_gd_zs fm_lbl_bmny_ir_zs fm_lbl_bmny_zg fp_cpi_totl fp_wpi_totl fr_inr_dpst fr_inr_lend fr_inr_lndp fr_inr_rinr fr_inr_risk fs_ast_cgov_gd_zs fs_ast_domo_gd_zs fs_ast_doms_gd_zs fs_ast_prvt_gd_zs ic_crd_info_xq ic_crd_prvt_zs ic_crd_publ_zs ic_lgl_cred_xq ny_gdp_defl_kd_zg_ad ny_gdp_defl_zs_ad pa_nus_fcrf px_rex_reer sm_pop_netm sm_pop_totl sm_pop_totl_zs sl_agr_0714_fe_zs sl_agr_0714_ma_zs sl_agr_0714_zs sl_agr_empl_fe_zs sl_agr_empl_ma_zs sl_agr_empl_zs sl_emp_1524_sp_fe_ne_zs sl_emp_1524_sp_fe_zs sl_emp_1524_sp_ma_ne_zs sl_emp_1524_sp_ma_zs sl_emp_1524_sp_ne_zs sl_emp_1524_sp_zs sl_emp_mpyr_fe_zs sl_emp_mpyr_ma_zs sl_emp_mpyr_zs sl_emp_self_fe_zs sl_emp_self_ma_zs sl_emp_self_zs sl_emp_smgt_fe_zs sl_emp_totl_sp_fe_ne_zs sl_emp_totl_sp_fe_zs sl_emp_totl_sp_ma_ne_zs sl_emp_totl_sp_ma_zs sl_emp_totl_sp_ne_zs sl_emp_totl_sp_zs sl_emp_vuln_fe_zs sl_emp_vuln_ma_zs sl_emp_vuln_zs sl_emp_work_fe_zs sl_emp_work_ma_zs sl_emp_work_zs sl_fam_0714_fe_zs sl_fam_0714_ma_zs sl_fam_0714_zs sl_fam_work_fe_zs sl_fam_work_ma_zs sl_fam_work_zs sl_gdp_pcap_em_kd sl_ind_empl_fe_zs sl_ind_empl_ma_zs sl_ind_empl_zs sl_mnf_0714_fe_zs sl_mnf_0714_ma_zs sl_mnf_0714_zs sl_slf_0714_fe_zs sl_slf_0714_ma_zs sl_slf_0714_zs sl_srv_0714_fe_zs sl_srv_0714_ma_zs sl_srv_0714_zs sl_srv_empl_fe_zs sl_srv_empl_ma_zs sl_srv_empl_zs sl_tlf_0714_fe_zs sl_tlf_0714_ma_zs sl_tlf_0714_sw_fe_tm sl_tlf_0714_sw_fe_zs sl_tlf_0714_sw_ma_tm sl_tlf_0714_sw_ma_zs sl_tlf_0714_sw_tm sl_tlf_0714_sw_zs sl_tlf_0714_wk_fe_tm sl_tlf_0714_wk_fe_zs sl_tlf_0714_wk_ma_tm sl_tlf_0714_wk_ma_zs sl_tlf_0714_wk_tm sl_tlf_0714_wk_zs sl_tlf_0714_zs sl_tlf_acti_1524_fe_ne_zs sl_tlf_acti_1524_fe_zs sl_tlf_acti_1524_ma_ne_zs sl_tlf_acti_1524_ma_zs sl_tlf_acti_1524_ne_zs sl_tlf_acti_1524_zs sl_tlf_acti_fe_zs sl_tlf_acti_ma_zs sl_tlf_acti_zs sl_tlf_advn_fe_zs sl_tlf_advn_ma_zs sl_tlf_advn_zs sl_tlf_basc_fe_zs sl_tlf_basc_ma_zs sl_tlf_basc_zs sl_tlf_cact_fe_ne_zs sl_tlf_cact_fe_zs sl_tlf_cact_fm_ne_zs sl_tlf_cact_fm_zs sl_tlf_cact_ma_ne_zs sl_tlf_cact_ma_zs sl_tlf_cact_ne_zs sl_tlf_cact_zs sl_tlf_intm_fe_zs sl_tlf_intm_ma_zs sl_tlf_intm_zs sl_tlf_part_fe_zs sl_tlf_part_ma_zs sl_tlf_part_zs sl_tlf_totl_fe_zs sl_tlf_totl_in sl_uem_1524_fe_ne_zs sl_uem_1524_fe_zs sl_uem_1524_ma_ne_zs sl_uem_1524_ma_zs sl_uem_1524_ne_zs sl_uem_1524_zs sl_uem_advn_fe_zs sl_uem_advn_ma_zs sl_uem_advn_zs sl_uem_basc_fe_zs sl_uem_basc_ma_zs sl_uem_basc_zs sl_uem_intm_fe_zs sl_uem_intm_ma_zs sl_uem_intm_zs sl_uem_neet_fe_zs sl_uem_neet_ma_zs sl_uem_neet_zs sl_uem_totl_fe_ne_zs sl_uem_totl_fe_zs sl_uem_totl_ma_ne_zs sl_uem_totl_ma_zs sl_uem_totl_ne_zs sl_uem_totl_zs sl_wag_0714_fe_zs sl_wag_0714_ma_zs sl_wag_0714_zs per_allsp_adq_pop_tot per_allsp_ben_q1_tot per_allsp_cov_pop_tot per_lm_alllm_adq_pop_tot per_lm_alllm_ben_q1_tot per_lm_alllm_cov_pop_tot per_lm_alllm_cov_q1_tot per_lm_alllm_cov_q2_tot per_lm_alllm_cov_q3_tot per_lm_alllm_cov_q4_tot per_lm_alllm_cov_q5_tot per_sa_allsa_adq_pop_tot per_sa_allsa_ben_q1_tot per_sa_allsa_cov_pop_tot per_sa_allsa_cov_q1_tot per_sa_allsa_cov_q2_tot per_sa_allsa_cov_q3_tot per_sa_allsa_cov_q4_tot per_sa_allsa_cov_q5_tot per_si_allsi_adq_pop_tot per_si_allsi_ben_q1_tot per_si_allsi_cov_pop_tot per_si_allsi_cov_q1_tot per_si_allsi_cov_q2_tot per_si_allsi_cov_q3_tot per_si_allsi_cov_q4_tot per_si_allsi_cov_q5_tot {
	notes `oldvar' : `oldvar'
}
*Batch rename
rename (bg_gsr_nfsv_gd_zs - per_si_allsi_cov_q5_tot) v#, addnumber

format Year %ty

la val v* .

save "${apidata}/WBAPI_cleaned_renamed.dta", replace




